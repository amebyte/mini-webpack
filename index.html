<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mini-webpack</title>
</head>

<body>
    <script>

        (function (list) {
            function require(file) {
                const code = list[file]
                // 导出模块
                var exports = {};
                (function (exports, code) {
                    eval(code)
                })(exports, code)
                return exports
            }
            // 执行入口 index.js
            require('index.js')
        })({
            'index.js': `var add = require('add.js').default
        console.log(add(1, 2))`,
            'add.js': `exports.default = function(a, b) { return a + b }`
        })


        // console.log(exports.default(1, 5)) // 输出6

        // const list = {
        //     'index.js': `var add = require('./add.js').default
        // console.log(add(1, 2))`,
        //     'add.js': `exports.default = function(a, b) { return a + b }`
        // }
    </script>
</body>

</html>